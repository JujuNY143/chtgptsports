<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Enhanced Sports Ticker</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: transparent;
      overflow: hidden;
    }

    #sports-ticker {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: rgba(0, 0, 0, 0.9);
      color: white;
      font-size: 26px;
      font-family: Arial, sans-serif;
      white-space: nowrap;
      overflow: hidden;
      z-index: 9999;
      display: flex;
      align-items: center;
    }

    #ticker-content {
      display: inline-block;
      padding-left: 100%;
      animation: scroll-left 25s linear infinite;
    }

    @keyframes scroll-left {
      0% { transform: translateX(0); }
      100% { transform: translateX(-100%); }
    }

    .status-live {
      color: #00ff00;
      font-weight: bold;
    }

    .status-final {
      color: #ff4444;
    }

    .status-scheduled {
      color: #ffcc00;
    }

    .breaking-news {
      color: #ff3333;
      font-weight: bold;
    }

    .game-item img {
      height: 24px;
      vertical-align: middle;
      margin-right: 6px;
    }
  </style>
</head>
<body>
  <div id="sports-ticker">
    <span id="ticker-content">Loading scores...</span>
  </div>

  <script>
    async function loadTicker() {
      const API_KEY = '813745'; // your TheSportsDB API key
      const today = new Date().toISOString().slice(0, 10);
      const sports = {
        NBA: 'üèÄ',
        MLB: '‚öæ',
        NFL: 'üèà',
        NHL: 'üèí',
        MLS: '‚öΩ'
      };

      const tickerEl = document.getElementById("ticker-content");
      let output = "";

      for (const sport in sports) {
        try {
          const res = await fetch(`https://www.thesportsdb.com/api/v1/json/${API_KEY}/eventsday.php?d=${today}&s=${sport}`);
          const data = await res.json();
          if (data.events) {
            for (const game of data.events) {
              const team1 = game.strHomeTeam;
              const team2 = game.strAwayTeam;
              const score1 = game.intHomeScore ?? "";
              const score2 = game.intAwayScore ?? "";
              const status = (game.strStatus ?? game.strTime ?? "Scheduled").toUpperCase();

              let statusClass = "status-scheduled";
              if (status.includes("LIVE")) statusClass = "status-live";
              else if (status.includes("FINAL")) statusClass = "status-final";

              const logo1 = `https://www.thesportsdb.com/images/media/team/badge/${(game.idHomeTeam || '0')}.png`;
              const logo2 = `https://www.thesportsdb.com/images/media/team/badge/${(game.idAwayTeam || '0')}.png`;

              output += `
                <span class="game-item">
                  ${sports[sport]} 
                  <img src="${logo1}" onerror="this.style.display='none'" alt="${team1} logo" />
                  ${team1} ${score1} - ${score2} ${team2}
                  <img src="${logo2}" onerror="this.style.display='none'" alt="${team2} logo" />
                  <span class="${statusClass}">(${status})</span> ‚ö° 
                </span>
              `;
            }
          }
        } catch (err) {
          console.error(`Error fetching ${sport}`, err);
        }
      }

      // Add News
      const news = [
        { content: 'MLB Trade Deadline approaching - Big moves expected', breaking: false },
        { content: 'NBA Summer League continues in Las Vegas', breaking: false },
        { content: 'NFL Training camps set to open soon', breaking: false },
        { content: 'üî• BREAKING: Follow The Bench Warmers for live sports alerts!', breaking: true }
      ];

      news.forEach(item => {
        output += `<span class="${item.breaking ? 'breaking-news' : ''}">üì∞ ${item.content}</span> ‚ö° `;
      });

      tickerEl.innerHTML = output;
    }

    loadTicker();
    setInterval(loadTicker, 300000); // refresh every 5 minutes
  </script>
</body>
</html>
